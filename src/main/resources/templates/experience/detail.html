<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shorcut icon" href="/images/member/kok_favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/font/font.css">
    <link rel="stylesheet" href="/css/experience/list.css">
    <title>체험공고 | 콕</title>
</head>
<body>
    <div id="main-content" class="main-content">
        <main class="main">
            <div class="content-layout">
                <div class="content-container">
                    <div class="content-detail">
                        <div class="content-detail-inner" id="experienceDetail-${experienceId}" th:object="${experienceNotice}">
                            <div class="content-detail-header">
                                <button class="detail-arrow-btn">
                                    <svg fill="currentColor" height="20" role="img" width="20">
                                        <path clip-rule="evenodd" d="M11.566 5.435a.8.8 0 0 0-1.132 0l-6 6a.8.8 0 0 0 0 1.13l6 6a.8.8 0 1 0 1.132-1.13L6.93 12.8H19a.8.8 0 1 0 0-1.6H6.931l4.635-4.634a.8.8 0 0 0 0-1.131" fill-rule="evenodd"></path>
                                    </svg>
                                    <p>목록</p>
                                </button>
                            </div>
                            <div class="content-detail-body">
                                <button class="list-item-header">
                                    <div class="list-item-thumb">
                                        <img src="${fileUrl}" alt="">
                                    </div>
                                    <div class="list-item-content">
                                        <p class="list-item-title">${detailData.company.companyName}</p>
                                        <ul class="profile-stats">
                                            <li class="profile-stat-item">팔로워 <i class="num">${detailData.company.followerCount}</i></li>
                                            <li class="profile-stat-item">체험공고 <i class="num">${detailData.company.experienceCount}</i></li>
                                            <li class="profile-stat-item">인턴공고 <i class="num">${detailData.company.internCount}</i></li>
                                        </ul>
                                    </div>
                                </button>

                                <div class="detail-content">
                                    <div class="detail-header">
                                        <strong class="detail-title">${detailData.notice.experienceNoticeTitle}</strong>
                                        <p class="detail-subtitle">${detailData.notice.experienceNoticeSubtitle}</p>
                                    </div>

                                    <div class="detail-actions">
                                        <!-- popup-trigger 클래스가 있으면 열림 -->
                                        <button class="detail-action-btn detail-apply-btn popup-trigger" data-target="#quick-apply-popup">간편 지원하기</button>
                                        <button class="detail-action-btn detail-save-btn">저장하기</button>
                                        <button class="detail-action-btn detail-share-btn">공유하기</button>
                                    </div>

                                    <ul class="detail-meta">
                                        <li class="detail-meta-item">
                                            <p class="meta-label">직군</p>
                                            <p class="meta-value">${detailData.notice.jobName}</p>
                                        </li>
                                        <li class="detail-meta-item">
                                            <p class="meta-label">회사 규모</p>
                                            <p class="meta-value">${detailData.company.scaleName}</p>
                                        </li>
                                    </ul>

                                    <div class="deadline-info">
                                        <p class="deadline-remain">지원 마감까지 ${detailData.notice.remainingDays}일 남음</p>
                                        <p class="deadline-description">${formatted}까지 지원할 수 있습니다.</p>
                                    </div>

                                    <div class="detail-description">
                                        <div class="detail-item">
                                            <p class="detail-item-title">직무소개</p>
                                            <p class="detail-item-content">${detailData.notice.experienceNoticeIntroduceJob}</p>
                                        </div>
                                        <div class="detail-item">
                                            <p class="detail-item-title">참고사항</p>
                                            <p class="detail-item-content">${detailData.notice.experienceNoticeEtc}</p>
                                        </div>
                                        <div class="detail-item">
                                            <p class="detail-item-title">주요 업무</p>
                                            <p class="detail-item-content">${detailData.notice.experienceMainTasks}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>


    <!-- toast - white -->
    <div id="toast-white" class="toast-warning">
        <div class="toast-warning-content">
            <div class="toast-inner">
                <div class="toast-icon">
                    <svg viewBox="0 0 24 24" fill="#fff" height="20" role="img" width="20">
                        <path clip-rule="evenodd" d="M12 3.8a8.2 8.2 0 1 0 0 16.4 8.2 8.2 0 0 0 0-16.4M2.2 12c0-5.412 4.388-9.8 9.8-9.8s9.8 4.388 9.8 9.8-4.388 9.8-9.8 9.8-9.8-4.387-9.8-9.8M12 8.19a.8.8 0 0 1 .8.8V9a.8.8 0 0 1-1.6 0v-.01a.8.8 0 0 1 .8-.8m0 3.01a.8.8 0 0 1 .8.8v3a.8.8 0 0 1-1.6 0v-3a.8.8 0 0 1 .8-.8" fill-rule="evenodd"></path>
                    </svg>
                </div>
                <p class="toast-text">채용 공고 저장했습니다.</p>
            </div>
        </div>
    </div>

    <!-- toast - 공유하기 -->
    <div id="toast-share" class="toast-warning">
        <div class="toast-warning-content">
            <div class="toast-inner">
                <div class="toast-icon">
                    <svg aria-label="icon" color="foregrounds.surface.static" fill="currentColor" height="20" role="img" width="20">
                        <path clip-rule="evenodd" d="M12.141 5.07a4.8 4.8 0 1 1 6.788 6.789l-1.414 1.414a.8.8 0 1 1-1.131-1.131l1.414-1.415a3.2 3.2 0 0 0-4.526-4.525l-1.414 1.414a.8.8 0 0 1-1.131-1.131zm3.253 3.536a.8.8 0 0 1 0 1.131l-5.657 5.657a.8.8 0 0 1-1.132-1.131l5.657-5.657a.8.8 0 0 1 1.132 0m-7.778 2.121a.8.8 0 0 1 0 1.132L6.2 13.273a3.2 3.2 0 0 0 4.526 4.525l1.414-1.414a.8.8 0 0 1 1.131 1.131l-1.414 1.415a4.8 4.8 0 0 1-6.788-6.788l1.414-1.415a.8.8 0 0 1 1.132 0" fill-rule="evenodd"></path>
                    </svg>
                </div>
                <p class="toast-text">채용 공고 링크를 복사했습니다.</p>
            </div>
            <p class="url-share">https://www.rocketpunch.com/jobs/157187</p>
        </div>
    </div>

    <!-- toast - 보관함 유형, 파일 정보 누락 -->
    <div id="toast-library" class="toast-warning">
        <div class="toast-warning-content">
            <div class="toast-inner">
                <div class="toast-icon">
                    <svg viewBox="0 0 24 24" fill="#f04452" height="20" role="img" width="20">
                        <path clip-rule="evenodd" d="M12 3.8a8.2 8.2 0 1 0 0 16.4 8.2 8.2 0 0 0 0-16.4M2.2 12c0-5.412 4.388-9.8 9.8-9.8s9.8 4.388 9.8 9.8-4.388 9.8-9.8 9.8-9.8-4.387-9.8-9.8M12 8.19a.8.8 0 0 1 .8.8V9a.8.8 0 0 1-1.6 0v-.01a.8.8 0 0 1 .8-.8m0 3.01a.8.8 0 0 1 .8.8v3a.8.8 0 0 1-1.6 0v-3a.8.8 0 0 1 .8-.8" fill-rule="evenodd"></path>
                    </svg>
                </div>
                <p class="toast-text">필수 정보 누락</p>
            </div>
            <p class="toast-subText">파일을 선택해주세요.</p>
        </div>
    </div>

    <!-- popup - 간편지원하기 -->
    <div id="quick-apply-popup" class="popup-container pop-side">
        <div class="popup-inner">
            <div class="popup-header">
                <strong class="popup-title">간편 지원하기</strong>
                <button class="popup-close popup-remove">닫기</button>
            </div>

            <form action="">
                <div class="popup-body">
                    <ul class="form-list form-row">
                        <li class="form-item">
                            <label class="form-label" for="name-input">이름<span class="must">*</span></label>
                            <div class="form-field">
                                <input type="text" id="name-input" placeholder="이름">
                            </div>
                        </li>
                        <li class="form-item">
                            <label class="form-label" for="email-input">이메일<span class="must">*</span></label>
                            <div class="form-field">
                                <input type="text" id="email-input" placeholder="example@gmail.com">
                            </div>
                        </li>
                        <li class="form-item">
                            <label class="form-label" for="phone-input">전화번호<span class="must">*</span></label>
                            <div class="form-field">
                                <input type="text" id="phone-input" placeholder="전화번호" maxlength="13" oninput="formatPhoneNumber(this)">
                            </div>
                        </li>
                        <li class="form-item line">
                            <p class="form-label">이력서<span class="must">*</span></p>
                            <div class="form-field">
                                <input type="hidden" id="resume-value">
                                <button type="button" class="file-btn popup-trigger" data-target="#resume-check-popup">파일 선택 가능</button>
                            </div>
                        </li>
                        <li class="form-item line">
                            <p class="form-label">URL</p>
                            <div class="form-field">
                                <input id="" placeholder="https://www.example.com">
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="popup-action line">
                    <button type="button" class="pop-btn btn-primary">간편 지원하기</button>
                </div>
            </form>
        </div>
    </div>

    <!-- popup - 이력서 -->
    <div id="resume-check-popup" class="popup-container pop-side">
        <div class="popup-inner">
            <div class="popup-header">
                <button class="popup-prev">
                    <svg fill="currentColor" height="20" role="img" width="20">
                        <path clip-rule="evenodd" d="M11.566 5.435a.8.8 0 0 0-1.132 0l-6 6a.8.8 0 0 0 0 1.13l6 6a.8.8 0 1 0 1.132-1.13L6.93 12.8H19a.8.8 0 1 0 0-1.6H6.931l4.635-4.634a.8.8 0 0 0 0-1.131" fill-rule="evenodd"></path>
                    </svg>
                </button>
                <div class="popup-title-container">
                    <strong class="popup-title">이력서</strong>
                    <span class="popup-description">파일 또는 URL 선택</span>
                </div>
            </div>

            <div class="popup-body scroll">
                <ul class="form-list file-list form-row">
                    <li class="form-item">
                        <div class="file-container">
                            <div class="file-icon">
                                <img src="/images/experience/icon_file_excel.svg" alt="">
                            </div>
                            <div class="file-info">
                                <p class="file-label">포트폴리오</p>
                                <span class="file-name">파일이름.xlsx</span>
                            </div>
                        </div>
                        <div class="btn-check-container">
                            <div class="radio-box">
                                <label for="check1" class="icon-radio">
                                    <input type="radio" name="radio" id="check1">
                                </label>
                            </div>
                        </div>
                    </li>
                    <li class="form-item">
                        <div class="file-container">
                            <div class="file-icon">
                                <!-- 기본이미지 -->
                                <img src="/images/experience/icon_file_default.svg" alt="">
                            </div>
                            <div class="file-info">
                                <p class="file-label">포트폴리오</p>
                                <span class="file-name">파일이름</span>
                            </div>
                        </div>
                        <div class="btn-check-container">
                            <div class="radio-box">
                                <label for="check2" class="icon-radio">
                                    <input type="radio" name="radio" id="check2">
                                </label>
                            </div>
                        </div>
                    </li>
                    <li class="form-item">
                        <div class="file-container">
                            <div class="file-icon">
                                <img src="/images/experience/icon_file_pdf.svg" alt="">
                            </div>
                            <div class="file-info">
                                <p class="file-label">포트폴리오</p>
                                <span class="file-name">파일이름.pdf</span>
                            </div>
                        </div>
                        <div class="btn-check-container">
                            <div class="radio-box">
                                <label for="check3" class="icon-radio">
                                    <input type="radio" name="radio" id="check3">
                                </label>
                            </div>
                        </div>
                    </li>
                    <li class="form-item">
                        <div class="file-container">
                            <div class="file-icon">
                                <img src="/images/experience/icon_file_ppt.svg" alt="">
                            </div>
                            <div class="file-info">
                                <p class="file-label">포트폴리오</p>
                                <span class="file-name">파일이름.ppt</span>
                            </div>
                        </div>
                        <div class="btn-check-container">
                            <div class="radio-box">
                                <label for="check4" class="icon-radio">
                                    <input type="radio" name="radio" id="check4">
                                </label>
                            </div>
                        </div>
                    </li>
                    <li class="form-item">
                        <div class="file-container">
                            <div class="file-icon">
                                <img src="/images/experience/icon_file_docx.svg" alt="">
                            </div>
                            <div class="file-info">
                                <p class="file-label">포트폴리오</p>
                                <span class="file-name">파일이름.docx</span>
                            </div>
                        </div>
                        <div class="btn-check-container">
                            <div class="radio-box">
                                <label for="check5" class="icon-radio">
                                    <input type="radio" name="radio" id="check5">
                                </label>
                            </div>
                        </div>
                    </li>
                </ul>
                
                <!-- 데이터 없을때 -->
                <div class="no-data">
                    <p class="title">아직 등록된 라이브러리가 없습니다.</p>
                    <p class="description">파일 또는 URL을 미리 등록하면 빠르게 공고에 지원할 수 있습니다.</p>

                    <button type="button" class="btn-primary popup-trigger" data-target="#resume-upload-popup">등록하기</button>
                </div>
            </div>

            <div class="popup-action line">
                <button id="file-add-btn" class="pop-btn btn-default popup-trigger" data-target="#resume-upload-popup">추가 등록</button>
                <button id="file-select-btn" class="pop-btn btn-primary" disabled>선택 완료</button>
            </div>
        </div>
    </div>

    <!-- popup - 이력서등록 -->
    <!-- data-sticky="true" 남아야 하는 팝업일때 붙임 -->
    <div id="resume-upload-popup" class="popup-container pop-center" data-sticky="true">
        <div class="popup-inner">
            <div class="popup-header">
                <strong class="popup-title">보관함 등록</strong>
                <button class="popup-close popup-library-close">닫기</button>
            </div>
            <form action="/api/experiences/request" method="post">
                <div class="popup-body">
                    <div class="form-list form-grid">
                        <div class="form-item flex-1-1">
                            <label class="form-label" for="type-input">유형<span class="must">*</span></label>
                            <div class="form-field form-field-dropdown">
                                <input type="text" id="type-input" class="dropdown-trigger" data-target="#dropdown2" placeholder="선택 또는 입력">

                                <div id="dropdown2" class="option-menu">
                                    <ul class="option-list">
                                        <li class="option-item option-input">
                                            <button type="button" class="option-btn">
                                                <svg aria-label="icon" color="foregrounds.neutral.primary" fill="currentColor" height="24" role="img" width="24">
                                                    <path clip-rule="evenodd" d="M12 4.2a.8.8 0 0 1 .8.8v6.2H19a.8.8 0 0 1 0 1.6h-6.2V19a.8.8 0 0 1-1.6 0v-6.2H5a.8.8 0 0 1 0-1.6h6.2V5a.8.8 0 0 1 .8-.8" fill-rule="evenodd"></path>
                                                </svg>
                                                <p>직접 입력</p>
                                            </button>
                                        </li>
                                        <li class="option-item">
                                            <button type="button" class="option-btn">
                                                <p>이력서</p>
                                            </button>
                                        </li>
                                        <li class="option-item">
                                            <button type="button" class="option-btn">
                                                <p>포트폴리오</p>
                                            </button>
                                        </li>
                                        <li class="option-item">
                                            <button type="button" class="option-btn">
                                                <p>자기소개서</p>
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="form-item flex-3">
                            <label class="form-label" for="file-input">파일<span class="must">*</span></label>
                            <div class="form-field">
                                <!-- 실제 파일 input은 숨김 -->
                                <input type="file" id="file-input" hidden>
                                <!-- 파일명이 표시될 커스텀 영역 -->
                                <label for="file-input" class="form-file-label">파일</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="popup-action">
                    <button id="pop-apply" class="pop-btn btn-primary">등록하기</button>
                </div>
            </form>
        </div>
    </div>

    <!-- popup - 닫기 메세지 -->
    <div id="message-popup" class="popup-container pop-center pop-default">
        <div class="popup-inner">
            <div class="popup-body">
                <div class="popup-title-box">
                    <strong class="popup-title">변경사항이 저장되지 않았습니다.</strong>
                    <p class="popup-sub-title">지금 나가면 변경사항이 반영되지 않습니다.<br/>그래도 나가시겠습니까?</p>
                </div>
            </div>
            <div class="popup-action popup-btn-row">
                <button class="pop-btn btn-primary popup-all-close">저장하지 않고 나가기</button>
                <button class="pop-btn btn-default popup-continue popup-remove">계속 작성하기</button>
            </div>
        </div>
    </div>
</body>
<script th:inline="javascript">
    const experienceData = [[${experienceNoticeCriteria}]];
    const search = [[${search}]];
    const keyword = [[${search.keyword}]];

</script>
<script src="/js/experience/module/service.js"></script>
<script src="/js/experience/module/layout.js"></script>
<script src="/js/experience/event.js"></script>
</html>